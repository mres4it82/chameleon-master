flutter_root = File.expand_path('../Flutter', __FILE__)
load File.join(flutter_root, 'flutter_export_environment.rb') if File.exist?(File.join(flutter_root, 'flutter_export_environment.rb'))

platform :ios, '12.0'

# Ensure Flutter plugin files are correctly included

# Ensure CocoaPods and Flutter paths are correct
flutter_root = File.expand_path('..', Dir.pwd) + '/flutter'
load File.join(flutter_root, 'flutter_export_environment.rb') if File.exist?(File.join(flutter_root, 'flutter_export_environment.rb'))

load File.join(flutter_root, 'generated_plugins.rb') if File.exist?(File.join(flutter_root, 'generated_plugins.rb'))
 
target 'Runner' do
  use_frameworks! 
  use_modular_headers!

  # Flutter plugin support (Ensures connectivity_plus and others work)
  flutter_install_all_ios_pods(flutter_root)

  pod 'DKPhotoGallery', :modular_headers => true
  pod 'SDWebImage', :modular_headers => true
  
  target 'RunnerTests' do
    inherit! :search_paths
  end
end
