platform :ios, '12.0'

# Flutter root path
flutter_root = File.expand_path('../Flutter', __FILE__)

# Load the Flutter environment export file
load File.join(flutter_root, 'flutter_export_environment.rb') if File.exist?(File.join(flutter_root, 'flutter_export_environment.rb'))

# Load the generated Flutter plugins (only if it exists)
load File.join(flutter_root, 'generated_plugins.rb') if File.exist?(File.join(flutter_root, 'generated_plugins.rb'))

target 'Runner' do
  use_frameworks!
  use_modular_headers!

  # Ensure Flutter dependencies are correctly handled
  pod 'Flutter', :path => File.expand_path('..', __FILE__) + '/Flutter'

  # Add other iOS dependencies here
  pod 'DKPhotoGallery', :modular_headers => true
  pod 'SDWebImage', :modular_headers => true
  
  target 'RunnerTests' do
    inherit! :search_paths
  end
end
